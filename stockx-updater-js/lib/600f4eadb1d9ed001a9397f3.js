var StockXAPI = require("stockx-api");
const stockX = new StockXAPI();;
try{
    await stockX.login({
            user: '',
            password: ''
        });
    console.log("Successfully Logged In.")
}
catch(e){
    console.log(e)
}
stockX;
let test_item = stockX.fetchProductDetails('https://stockx.com/supreme-yohji-yamamoto-crewneck-orange?size=L').then(product => console.log(product)).catch(err => console.log(`Error scraping product details: ${err.message}`));;
console.log(test_item);
seller_listings = [{"link": "https://stockx.com/palace-ye-ham-shirt-indigo?size=S", "size": "S", "ask_price": 179, "highest_bid": 50, "lowest_ask": 179, "spread": 128, "expires": "29 days"}, {"link": "https://stockx.com/supreme-terry-s-s-zip-up-white?size=S", "size": "S", "ask_price": 196, "highest_bid": 15, "lowest_ask": 196, "spread": 181, "expires": "29 days"}, {"link": "https://stockx.com/ftp-10-year-jacket-black?size=M", "size": "M", "ask_price": 149, "highest_bid": -1, "lowest_ask": 149, "spread": -1, "expires": "29 days"}, {"link": "https://stockx.com/supreme-utility-belted-pant-black?size=S", "size": "S", "ask_price": 153, "highest_bid": 61, "lowest_ask": 153, "spread": 91, "expires": "29 days"}, {"link": "https://stockx.com/palace-bare-storage-jacket-flint-grey?size=M", "size": "M", "ask_price": 395, "highest_bid": 337, "lowest_ask": 350, "spread": 58, "expires": "29 days"}, {"link": "https://stockx.com/supreme-stone-washed-slim-jean-fw20-stone-washed-indigo?size=30", "size": "30", "ask_price": 229, "highest_bid": 38, "lowest_ask": 229, "spread": 191, "expires": "29 days"}, {"link": "https://stockx.com/ftp-allover-tee-olive?size=L", "size": "L", "ask_price": 114, "highest_bid": 48, "lowest_ask": 80, "spread": 66, "expires": "29 days"}, {"link": "https://stockx.com/supreme-ichi-the-killer-l-s-tee-light-purple?size=XL", "size": "XL", "ask_price": 144, "highest_bid": 82, "lowest_ask": 144, "spread": 62, "expires": "29 days"}, {"link": "https://stockx.com/palace-tri-chenille-hood-navy?size=M", "size": "M", "ask_price": 189, "highest_bid": 166, "lowest_ask": 188, "spread": 22, "expires": "29 days"}, {"link": "https://stockx.com/supreme-crossover-hooded-sweatshirt-natural?size=L", "size": "L", "ask_price": 235, "highest_bid": 200, "lowest_ask": 235, "spread": 35, "expires": "29 days"}, {"link": "https://stockx.com/kith-5-borough-brooklyn-tee-white?size=XS", "size": "XS", "ask_price": 114, "highest_bid": 51, "lowest_ask": 114, "spread": 63, "expires": "29 days"}, {"link": "https://stockx.com/palace-lon-dons-short-black?size=M", "size": "M", "ask_price": 193, "highest_bid": 35, "lowest_ask": 193, "spread": 158, "expires": "29 days"}, {"link": "https://stockx.com/supreme-blocked-stripe-s-s-top-peach?size=XL", "size": "XL", "ask_price": 98, "highest_bid": 15, "lowest_ask": 98, "spread": 83, "expires": "29 days"}, {"link": "https://stockx.com/kith-5-borough-manhattan-tee-white?size=S", "size": "S", "ask_price": 119, "highest_bid": 51, "lowest_ask": 119, "spread": 68, "expires": "29 days"}, {"link": "https://stockx.com/palace-lon-dons-crew-black?size=L", "size": "L", "ask_price": 248, "highest_bid": 120, "lowest_ask": 248, "spread": 128, "expires": "29 days"}, {"link": "https://stockx.com/supreme-overdyed-beanie-ss20-black", "size": "N/A", "ask_price": 90, "highest_bid": 91, "lowest_ask": 100, "spread": -1, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-pealed-jogger-grey?size=S", "size": "S", "ask_price": 257, "highest_bid": 15, "lowest_ask": -1, "spread": 242, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-hesh-mit-fresh-hood-black?size=M", "size": "M", "ask_price": 309, "highest_bid": 231, "lowest_ask": 325, "spread": 78, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-pealed-hood-grey?size=M", "size": "M", "ask_price": 229, "highest_bid": 60, "lowest_ask": 220, "spread": 169, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-yohji-yamamoto-crewneck-orange?size=L", "size": "L", "ask_price": 189, "highest_bid": 100, "lowest_ask": 169, "spread": 89, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-tri-chenille-hood-black?size=M", "size": "M", "ask_price": 197, "highest_bid": 143, "lowest_ask": 239, "spread": 54, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-motion-logo-tee-ss20-yellow?size=XL", "size": "XL", "ask_price": 149, "highest_bid": 70, "lowest_ask": 92, "spread": 79, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-the-north-face-cargo-jacket-black?size=M", "size": "M", "ask_price": 589, "highest_bid": 521, "lowest_ask": 530, "spread": 68, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-pealed-hood-blue?size=L", "size": "L", "ask_price": 218, "highest_bid": 110, "lowest_ask": 195, "spread": 108, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-pealed-hood-desert?size=XL", "size": "XL", "ask_price": 229, "highest_bid": 60, "lowest_ask": 180, "spread": 169, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-daniel-johnston-hooded-sweatshirt-black?size=XL", "size": "XL", "ask_price": 164, "highest_bid": 142, "lowest_ask": 185, "spread": 22, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-franklin-hooded-sweatshirt-washed-navy?size=L", "size": "L", "ask_price": 189, "highest_bid": 105, "lowest_ask": 179, "spread": 83, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-futura-logo-keychain-red", "size": "N/A", "ask_price": 29, "highest_bid": -1, "lowest_ask": 23, "spread": -1, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-new-era-s-logo-beanie-fw20-white", "size": "N/A", "ask_price": 99, "highest_bid": 65, "lowest_ask": 83, "spread": 34, "expires": "EXPIRED"}, {"link": "https://stockx.com/kith-x-coca-cola-m2-pickup-diecast-replica", "size": "N/A", "ask_price": 55, "highest_bid": 35, "lowest_ask": 48, "spread": 20, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-waves-work-jacket-black?size=L", "size": "L", "ask_price": 249, "highest_bid": 170, "lowest_ask": 185, "spread": 79, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-backpack-ss20-black", "size": "N/A", "ask_price": 299, "highest_bid": 180, "lowest_ask": 227, "spread": 119, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-backpack-ss20-blue-desert-camo", "size": "N/A", "ask_price": 299, "highest_bid": 135, "lowest_ask": 210, "spread": 164, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-backpack-ss20-blue-desert-camo", "size": "N/A", "ask_price": 299, "highest_bid": 135, "lowest_ask": 210, "spread": 164, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-waist-bag-fw20-black", "size": "N/A", "ask_price": 179, "highest_bid": 88, "lowest_ask": 99, "spread": 91, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-sling-bag-leopard", "size": "N/A", "ask_price": 199, "highest_bid": 80, "lowest_ask": 89, "spread": 119, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-top-of-the-world-s-s-top-dark-teal?size=XL", "size": "XL", "ask_price": 129, "highest_bid": 15, "lowest_ask": 120, "spread": 114, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-waist-bag-fw20-black", "size": "N/A", "ask_price": 189, "highest_bid": 88, "lowest_ask": 99, "spread": 101, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-contrast-boonie-ss20-black?size=S/M", "size": "S/M", "ask_price": 119, "highest_bid": 39, "lowest_ask": 56, "spread": 79, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-s-logo-new-era-black?size=7%203/8", "size": "7 3/8", "ask_price": 109, "highest_bid": 65, "lowest_ask": 79, "spread": 44, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-washed-chino-twill-camp-cap-fw20-natural", "size": "N/A", "ask_price": 109, "highest_bid": 75, "lowest_ask": 85, "spread": 34, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-crossover-beanie-black", "size": "N/A", "ask_price": 109, "highest_bid": 50, "lowest_ask": 70, "spread": 59, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-s-logo-new-era-black?size=7%203/8", "size": "7 3/8", "ask_price": 109, "highest_bid": 65, "lowest_ask": 79, "spread": 44, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-s-logo-new-era-black?size=7%205/8", "size": "7 5/8", "ask_price": 109, "highest_bid": 70, "lowest_ask": 94, "spread": 39, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-ichi-the-killer-l-s-tee-light-purple?size=L", "size": "L", "ask_price": 119, "highest_bid": 60, "lowest_ask": 89, "spread": 59, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-split-tee-black?size=XL", "size": "XL", "ask_price": 109, "highest_bid": 45, "lowest_ask": 50, "spread": 64, "expires": "EXPIRED"}, {"link": "https://stockx.com/kith-x-coca-cola-logo-cap-black", "size": "N/A", "ask_price": 109, "highest_bid": 57, "lowest_ask": 92, "spread": 51, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-yohji-yamamoto-scribble-portrait-tee-white?size=M", "size": "M", "ask_price": 109, "highest_bid": 53, "lowest_ask": 62, "spread": 56, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-flags-boonie-woodland-camo?size=S/M", "size": "S/M", "ask_price": 139, "highest_bid": -1, "lowest_ask": 85, "spread": -1, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-futura-logo-tee-ash-grey?size=M", "size": "M", "ask_price": 99, "highest_bid": 47, "lowest_ask": 50, "spread": 51, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-spitfire-p-fire-t-shirt-black?size=L", "size": "L", "ask_price": 99, "highest_bid": 25, "lowest_ask": 68, "spread": 74, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-social-tee-navy?size=S", "size": "S", "ask_price": 99, "highest_bid": 15, "lowest_ask": 80, "spread": 84, "expires": "EXPIRED"}, {"link": "https://stockx.com/kith-x-coca-cola-language-bottle-vintage-tee-white?size=XS", "size": "XS", "ask_price": 119, "highest_bid": 70, "lowest_ask": 80, "spread": 49, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-anno-domini-tee-light-purple?size=M", "size": "M", "ask_price": 89, "highest_bid": 45, "lowest_ask": 59, "spread": 44, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-anno-domini-tee-black?size=S", "size": "S", "ask_price": 79, "highest_bid": 45, "lowest_ask": 75, "spread": 34, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-shedrain-transparent-checkerboard-umbrella-black", "size": "N/A", "ask_price": 65, "highest_bid": 46, "lowest_ask": 55, "spread": 19, "expires": "EXPIRED"}, {"link": "https://stockx.com/anti-social-social-club-weird-cap-black", "size": "N/A", "ask_price": 75, "highest_bid": 56, "lowest_ask": 98, "spread": 19, "expires": "EXPIRED"}, {"link": "https://stockx.com/anti-social-social-club-weird-cap-black", "size": "N/A", "ask_price": 75, "highest_bid": 56, "lowest_ask": 98, "spread": 19, "expires": "EXPIRED"}, {"link": "https://stockx.com/anti-social-social-club-logo-2-tee-ss20-black?size=M", "size": "M", "ask_price": 75, "highest_bid": 42, "lowest_ask": 62, "spread": 33, "expires": "EXPIRED"}, {"link": "https://stockx.com/anti-social-social-club-logo-2-tee-ss20-black?size=XS", "size": "XS", "ask_price": 75, "highest_bid": -1, "lowest_ask": 62, "spread": -1, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-daniel-johnston-hooded-sweatshirt-dark-royal?size=M", "size": "M", "ask_price": 180, "highest_bid": 117, "lowest_ask": 148, "spread": 63, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-xx-longsleeve-navy?size=M", "size": "M", "ask_price": 100, "highest_bid": 66, "lowest_ask": 80, "spread": 33, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-kanji-logo-crewneck-heather-grey?size=L", "size": "L", "ask_price": 251, "highest_bid": 175, "lowest_ask": 214, "spread": 76, "expires": "EXPIRED"}, {"link": "https://stockx.com/ftp-10-year-jacket-white?size=M", "size": "M", "ask_price": 100, "highest_bid": 20, "lowest_ask": 120, "spread": 80, "expires": "EXPIRED"}, {"link": "https://stockx.com/nike-air-force-1-low-supreme-box-logo-black?size=10", "size": "10", "ask_price": 251, "highest_bid": 184, "lowest_ask": 224, "spread": 67, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-flippin-roach-book-multi", "size": "N/A", "ask_price": 22, "highest_bid": -1, "lowest_ask": -1, "spread": -1, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-daniel-johnston-tee-light-teal?size=XL", "size": "XL", "ask_price": 58, "highest_bid": 35, "lowest_ask": 55, "spread": 23, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-signature-s-s-top-peach?size=XL", "size": "XL", "ask_price": 60, "highest_bid": 20, "lowest_ask": -1, "spread": 40, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-overdyed-beanie-ss20-white", "size": "N/A", "ask_price": 90, "highest_bid": 86, "lowest_ask": 110, "spread": 4, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-tri-zooted-shakka-t-shirt-black?size=S", "size": "S", "ask_price": 75, "highest_bid": 60, "lowest_ask": 75, "spread": 14, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-the-north-face-rtg-backpack-bright-red", "size": "N/A", "ask_price": 249, "highest_bid": 165, "lowest_ask": 191, "spread": 83, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-the-north-face-rtg-utility-pouch-gold", "size": "N/A", "ask_price": 99, "highest_bid": 66, "lowest_ask": 70, "spread": 33, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-mesh-panel-water-short-grey?size=S", "size": "S", "ask_price": 249, "highest_bid": 129, "lowest_ask": 160, "spread": 119, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-debossed-glass-ashtray-clear", "size": "N/A", "ask_price": 69, "highest_bid": 50, "lowest_ask": 72, "spread": 19, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-waist-bag-ss20-blue-desert-camo", "size": "N/A", "ask_price": 194, "highest_bid": 126, "lowest_ask": 150, "spread": 68, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-terry-short-white?size=S", "size": "S", "ask_price": 179, "highest_bid": 15, "lowest_ask": -1, "spread": 164, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-trail-camp-cap-black", "size": "N/A", "ask_price": 104, "highest_bid": 53, "lowest_ask": 78, "spread": 51, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-trail-camp-cap-blue", "size": "N/A", "ask_price": 95, "highest_bid": 54, "lowest_ask": 65, "spread": 40, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-rhinestone-baseball-jersey-pinstripe?size=XL", "size": "XL", "ask_price": 259, "highest_bid": 15, "lowest_ask": 188, "spread": 244, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-tri-phone-t-shirt-black?size=M", "size": "M", "ask_price": 73, "highest_bid": 50, "lowest_ask": 69, "spread": 23, "expires": "EXPIRED"}, {"link": "https://stockx.com/palace-tri-phone-t-shirt-white?size=S", "size": "S", "ask_price": 74, "highest_bid": 25, "lowest_ask": 67, "spread": 49, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-daniel-johnston-beanie-black", "size": "N/A", "ask_price": 57, "highest_bid": 42, "lowest_ask": 49, "spread": 15, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-waves-crusher-multicolor?size=S/M", "size": "S/M", "ask_price": 139, "highest_bid": 36, "lowest_ask": 77, "spread": 102, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-terry-short-black?size=S", "size": "S", "ask_price": 259, "highest_bid": 16, "lowest_ask": 170, "spread": 243, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-sailboat-tee-white?size=XL", "size": "XL", "ask_price": 129, "highest_bid": 52, "lowest_ask": 57, "spread": 77, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-daniel-johnston-frog-tee-white?size=L", "size": "L", "ask_price": 65, "highest_bid": 30, "lowest_ask": 50, "spread": 34, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-the-north-face-floating-key-chain-gold", "size": "N/A", "ask_price": 33, "highest_bid": 15, "lowest_ask": 24, "spread": 18, "expires": "EXPIRED"}, {"link": "https://stockx.com/supreme-cherries-tee-white?size=M", "size": "M", "ask_price": 99, "highest_bid": 65, "lowest_ask": 80, "spread": 34, "expires": "EXPIRED"}];

seller_listings.forEach(async function(item) {

    if(item['expires'] == "EXPIRED"){
    
        // console.log(`Fetching product for ${item['link']}`)
        const stockx_item = await stockX.fetchProductDetails(item['link']);
        console.log(stockx_item)
        // console.log(`Fetched details for ${item['link']}. Placing ask.`)
        setTimeout(() => {  console.log("World!"); }, 5000);
        
        const res = await stockX.placeAsk(stockx_item, {
            amount: item['ask_price'], 
            size: item['size'] == 'N/A' ? 'random' : item['size']
        });
        setTimeout(() => {  console.log("World!"); }, 5000);
        console.log(`Successfully placed ask for ${item['link']}`)
    }
});
